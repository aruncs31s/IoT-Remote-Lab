{% extends "base.html" %} {% block page_title %}<i class="fa-solid fa-terminal"></i> C++ {% endblock %} {% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/dracula.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/programmer.css') }}"> {% endblock %} {% block content %}
<div class="programmer-container">
    <div class="status-message" id="status-message">
        <span id="status-text"></span>
    </div>

    <div class="editor-section">
        <div class="editor-header">
            <div class="program-input">
                <label for="program-name">Program Name:</label>
                <input type="text" id="program-name" placeholder="Enter program name..." maxlength="50">
            </div>
            <div class="editor-actions">
                <button class="btn btn-secondary" id="load-btn">
                    <i class="fa-solid fa-cloud"></i> Load
                </button>
                <button class="btn btn-primary" id="save-btn">
                    <i class="fa-solid fa-sd-card"></i> Save Program
                </button>
                <button class="btn btn-primary" id="upload-btn">
                    <i class="fa-solid fa-upload"></i> Upload
                </button>
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <span>Saving...</span>
                </div>
            </div>
        </div>

        <div class="code-editor-container">
            <textarea id="code-editor" placeholder="// Write your C++ code here..."></textarea>
            <!--             <textarea id="code-editor" placeholder="// Write your C++ code here... -->
            <!--                 #include <Arduino.h> -->
            <!---->
            <!--                 void setup() { -->
            <!--                     Serial.begin(115200); -->
            <!--                     Serial.println('Hello, ESP32!'); -->
            <!--                 } -->
            <!---->
            <!--                 void loop() { -->
            <!--                     // Your main code here -->
            <!--                     delay(1000); -->
            <!--                 }"> -->
            <!-- </textarea> -->
        </div>
    </div>

    <div class="saved-programs">
        <h3><i class="fa-solid fa-hard-drive"></i> Saved Programs</h3>
        <div class="programs-grid" id="programs-grid">
            <!-- Programs will be loaded here -->
        </div>
    </div>
</div>

<!-- Device Selection Modal -->
<div id="device-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fa-solid fa-microchip"></i> Select Device</h3>
            <span class="close-modal" id="close-modal">&times;</span>
        </div>
        <div class="modal-body">
            <div class="device-selection">
                <p>Choose a device to upload your code:</p>
                <div class="devices-list" id="devices-list">
                    <div class="loading-devices">
                        <div class="spinner"></div>
                        <span>Loading devices...</span>
                    </div>
                </div>
            </div>
            <div class="upload-options">
                <div class="option-group">
                    <label>
                        <input type="checkbox" id="monitor-serial" checked>
                        <i class="fa-solid fa-terminal"></i> Open Serial Monitor after upload
                    </label>
                </div>
                <div class="option-group">
                    <label>
                        <input type="checkbox" id="save-before-upload" checked>
                        <i class="fa-solid fa-sd-card"></i> Save program before upload
                    </label>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" id="cancel-upload">
                <i class="fa-solid fa-times"></i> Cancel
            </button>
            <button class="btn btn-primary" id="confirm-upload" disabled>
                <i class="fa-solid fa-upload"></i> Upload to Device
            </button>
        </div>
    </div>
</div>

{% endblock %} {% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/clike/clike.min.js"></script>
<script src="{{ url_for('static', filename='js/programmer.js') }}"></script>
{% endblock %}